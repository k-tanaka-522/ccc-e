#!/bin/bash
# Requirements Agent - Ë¶Å‰ª∂ÂÆöÁæ©„Ç®„Éº„Ç∏„Çß„É≥„Éà

# Ë®≠ÂÆö
AGENT_NAME="Requirements Agent"
AGENT_VERSION="1.0.0"
CONFIG_DIR="config"
TEMPLATES_DIR="templates/requirements"
OUTPUT_DIR="../requirements"

# „É≠„Ç∞Èñ¢Êï∞
log_info() {
    echo -e "\033[1;34m[INFO]\033[0m $1"
}

log_success() {
    echo -e "\033[1;32m[SUCCESS]\033[0m $1"
}

log_error() {
    echo -e "\033[1;31m[ERROR]\033[0m $1"
}

# ‰ΩøÁî®ÊñπÊ≥ï„ÅÆË°®Á§∫
show_usage() {
    cat << EOF
üìã Requirements Agent v${AGENT_VERSION}
================================

‰ΩøÁî®ÊñπÊ≥ï:
  $0 [„Ç™„Éó„Ç∑„Éß„É≥]

„Ç™„Éó„Ç∑„Éß„É≥:
  --wizard    „Ç¶„Ç£„Ç∂„Éº„Éâ„É¢„Éº„Éâ„ÅßË¶Å‰ª∂ÂÆöÁæ©
  --auto      „Åä„Åæ„Åã„Åõ„É¢„Éº„Éâ„ÅßËá™ÂãïÁîüÊàê
  --update    Êó¢Â≠òË¶Å‰ª∂„ÅÆÊõ¥Êñ∞
  --validate  Ë¶Å‰ª∂ÂÆöÁæ©„ÅÆÊ§úË®º
  --export    Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà
  --send      ‰ªñ„ÅÆ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å´Ë¶Å‰ª∂ÂÆöÁæ©„ÇíÈÄÅ‰ø°
  --help      „Åì„ÅÆ„Éò„É´„Éó„ÇíË°®Á§∫

‰æã:
  $0 --wizard
  $0 --auto "EC„Çµ„Ç§„Éà„ÇíÊßãÁØâ„Åó„Åü„ÅÑ"
  $0 --update
  $0 --validate

EOF
}

# „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂàùÊúüÂåñ
init_project() {
    log_info "„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÂàùÊúüÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô..."
    
    # „Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê
    mkdir -p "$OUTPUT_DIR" logs tmp
    
    # „Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„Éï„Ç°„Ç§„É´ÁîüÊàê
    if [ ! -f "$OUTPUT_DIR/index.md" ]; then
        generate_index
        log_success "„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„Éï„Ç°„Ç§„É´„ÇíÁîüÊàê„Åó„Åæ„Åó„Åü"
    fi
    
    # Ê±∫ÂÆöË®òÈå≤„ÅÆÂàùÊúüÂåñ
    if [ ! -f "$OUTPUT_DIR/decision_log.md" ]; then
        init_decision_log
        log_success "Ê±∫ÂÆöË®òÈå≤„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åó„Åü"
    fi
}

# „Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÁîüÊàê
generate_index() {
    cat > "$OUTPUT_DIR/index.md" << 'EOF'
# „Åì„Çå„Åã„ÇâÊ±∫„ÇÅ„Çã„Åì„Å®„É™„Çπ„Éà

## ‚úÖ ÂÆå‰∫ÜÊ∏à„ÅøÈ†ÖÁõÆ
- [x] „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂàùÊúüÂåñ

## üîÑ ÈÄ≤Ë°å‰∏≠„ÅÆÈ†ÖÁõÆ
- [ ] Ë¶Å‰ª∂ÂÆöÁæ©Ë©≥Á¥∞Âåñ

## üìã Êú™ÁùÄÊâã„ÅÆÈ†ÖÁõÆ

### 1. „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂
- [ ] „Çµ„Éº„Éì„ÇπÊ¶ÇË¶Å„ÅÆÊòéÁ¢∫Âåñ
- [ ] „Çø„Éº„Ç≤„ÉÉ„Éà„É¶„Éº„Ç∂„Éº„ÅÆÂÆöÁæ©
- [ ] ‰∏ªË¶ÅÊ©üËÉΩ„ÅÆÊ¥ó„ÅÑÂá∫„Åó
- [ ] ÊàêÂäüÊåáÊ®ôÔºàKPIÔºâ„ÅÆË®≠ÂÆö

### 2. ÊäÄË°ìË¶Å‰ª∂
- [ ] ÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞„ÅÆÊ±∫ÂÆö
- [ ] ÂèØÁî®ÊÄßÁõÆÊ®ôÔºàSLOÔºâ„ÅÆË®≠ÂÆö
- [ ] „É¨„Çπ„Éù„É≥„Çπ„Çø„Ç§„É†Ë¶Å‰ª∂
- [ ] „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂

### 3. AWSÊßãÊàê
- [ ] ÊßãÊàê„Éë„Çø„Éº„É≥„ÅÆÈÅ∏Êäû
- [ ] „Ç≥„Çπ„Éà‰∏äÈôê„ÅÆË®≠ÂÆö
- [ ] „É™„Éº„Ç∏„Éß„É≥„ÅÆÈÅ∏Êäû
- [ ] ÁÅΩÂÆ≥Âæ©ÊóßÊà¶Áï•

### 4. ÈÅãÁî®Ë¶Å‰ª∂
- [ ] „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÈ†ªÂ∫¶
- [ ] Áõ£Ë¶ñÈ†ÖÁõÆ„ÅÆÂÆöÁæ©
- [ ] „Ç¢„É©„Éº„ÉàË®≠ÂÆö
- [ ] ÈÅãÁî®‰ΩìÂà∂

### 5. ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂
- [ ] CI/CDÊà¶Áï•
- [ ] Áí∞Â¢ÉÊà¶Áï•Ôºàdev/staging/prodÔºâ
- [ ] „Éá„Éó„É≠„Ç§ÊñπÂºè
- [ ] „É≠„Éº„É´„Éê„ÉÉ„ÇØÊà¶Áï•

## üéØ ÂÑ™ÂÖàÂ∫¶„ÅÆÈ´ò„ÅÑÊ±∫ÂÆö‰∫ãÈ†Ö
1. ÂèØÁî®ÊÄßÁõÆÊ®ô„ÅÆË®≠ÂÆö
2. AWSÊßãÊàê„Éë„Çø„Éº„É≥„ÅÆÈÅ∏Êäû
3. „Ç≥„Çπ„Éà‰∏äÈôê„ÅÆÊ±∫ÂÆö

## üìû Ê¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥
- Requirements Agent „ÅÆÂÆüË°å
- Ë©≥Á¥∞Ë¶Å‰ª∂„ÅÆÂÆöÁæ©
- „Çπ„ÉÜ„Éº„ÇØ„Éõ„É´„ÉÄ„Éº„Å®„ÅÆÁ¢∫Ë™ç

EOF
}

# Ê±∫ÂÆöË®òÈå≤„ÅÆÂàùÊúüÂåñ
init_decision_log() {
    cat > "$OUTPUT_DIR/decision_log.md" << EOF
# Ê±∫ÂÆö‰∫ãÈ†ÖË®òÈå≤

## „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊÉÖÂ†±
- **„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç**: $(basename "$(pwd)")
- **‰ΩúÊàêÊó•**: $(date -I)
- **ÊúÄÁµÇÊõ¥Êñ∞**: $(date -I)
- **ÊãÖÂΩìËÄÖ**: Requirements Agent

## Ê±∫ÂÆö‰∫ãÈ†ÖÂ±•Ê≠¥

### $(date -I) - „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂàùÊúüÂåñ
- **Ê±∫ÂÆöÂÜÖÂÆπ**: Ë¶Å‰ª∂ÂÆöÁæ©„Éó„É≠„Çª„Çπ„ÅÆÈñãÂßã
- **ÁêÜÁî±**: „Ç®„É≥„Çø„Éº„Éó„É©„Ç§„Ç∫ÈñãÁô∫„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ„Å´Âæì„ÅÑ„ÄÅË¶Å‰ª∂ÂÆöÁæ©„Åã„ÇâÂßã„ÇÅ„Çã
- **ÂΩ±Èüø**: ÂÖ®‰Ωì„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊñπÈáù„ÅåÊ±∫„Åæ„Çã
- **ÊâøË™çËÄÖ**: Requirements Agent

### Êú™Ê±∫ÂÆö‰∫ãÈ†Ö
- „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÅÆË©≥Á¥∞
- ÊäÄË°ìË¶Å‰ª∂„ÅÆÂÖ∑‰ΩìÂåñ
- AWSÊßãÊàê„ÅÆÈÅ∏Êäû
- ÈÅãÁî®Ë¶Å‰ª∂„ÅÆÊòéÁ¢∫Âåñ

## Â§âÊõ¥Â±•Ê≠¥
- $(date -I): Ê±∫ÂÆöË®òÈå≤„ÇíÂàùÊúüÂåñ

EOF
}

# „Ç¶„Ç£„Ç∂„Éº„Éâ„É¢„Éº„Éâ
wizard_mode() {
    log_info "„Ç¶„Ç£„Ç∂„Éº„Éâ„É¢„Éº„Éâ„ÇíÈñãÂßã„Åó„Åæ„Åô"
    
    # Êó¢Â≠òË¶Å‰ª∂„ÅÆÁ¢∫Ë™ç
    if [ -f "$OUTPUT_DIR/requirements.md" ]; then
        log_info "Êó¢Â≠ò„ÅÆË¶Å‰ª∂ÂÆöÁæ©„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü"
        read -p "Êó¢Â≠ò„ÅÆË¶Å‰ª∂„ÇíÊõ¥Êñ∞„Åó„Åæ„Åô„ÅãÔºü (y/N): " update_existing
        if [ "$update_existing" != "y" ]; then
            log_info "Âá¶ÁêÜ„Çí‰∏≠Ê≠¢„Åó„Åæ„Åó„Åü"
            return 0
        fi
    fi
    
    echo ""
    echo "üìã Ë¶Å‰ª∂ÂÆöÁæ©„Ç¶„Ç£„Ç∂„Éº„Éâ"
    echo "===================="
    
    # 1. „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂü∫Êú¨ÊÉÖÂ†±
    echo ""
    echo "üìù 1. „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂü∫Êú¨ÊÉÖÂ†±"
    echo "========================"
    read -p "„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç: " project_name
    read -p "„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÊ¶ÇË¶ÅÔºà1Ë°å„ÅßÔºâ: " project_desc
    read -p "ÈñãÁô∫ÊúüÈñìÔºàÈÄ±Ôºâ: " development_period
    read -p "„ÉÅ„Éº„É†„Çµ„Ç§„Ç∫: " team_size
    
    # 2. „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂
    echo ""
    echo "üíº 2. „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂"
    echo "================="
    show_industry_templates
    read -p "Ê•≠Áïå„ÉÜ„É≥„Éó„É¨„Éº„ÉàÈÅ∏Êäû (1-6): " industry_template
    
    read -p "„Çø„Éº„Ç≤„ÉÉ„Éà„É¶„Éº„Ç∂„Éº: " target_users
    read -p "‰∏ªË¶ÅÊ©üËÉΩÔºà„Ç´„É≥„ÉûÂå∫Âàá„ÇäÔºâ: " main_features
    read -p "ÊàêÂäüÊåáÊ®ôÔºàKPIÔºâ: " success_metrics
    
    # 3. ÊäÄË°ìË¶Å‰ª∂
    echo ""
    echo "üîß 3. ÊäÄË°ìË¶Å‰ª∂"
    echo "============="
    read -p "ÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞ÔºàÂêåÊôÇÊé•Á∂öÔºâ: " concurrent_users
    read -p "ÊÉ≥ÂÆö„Éá„Éº„ÇøÈáèÔºàGBÔºâ: " data_volume
    
    show_slo_options
    read -p "ÂèØÁî®ÊÄßÁõÆÊ®ôÈÅ∏Êäû (1-4): " slo_choice
    
    read -p "„É¨„Çπ„Éù„É≥„Çπ„Çø„Ç§„É†Ë¶Å‰ª∂ÔºàÁßíÔºâ: " response_time
    
    # 4. „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂
    echo ""
    echo "üîí 4. „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂"
    echo "===================="
    show_security_options
    read -p "„Çª„Ç≠„É•„É™„ÉÜ„Ç£„É¨„Éô„É´ÈÅ∏Êäû (1-4): " security_level
    
    read -p "ÂÄã‰∫∫ÊÉÖÂ†±„ÇíÊâ±„ÅÑ„Åæ„Åô„ÅãÔºü (y/N): " handle_pii
    read -p "Ê±∫Ê∏àÊ©üËÉΩ„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü (y/N): " payment_feature
    
    # 5. AWSÊßãÊàê
    echo ""
    echo "‚òÅÔ∏è 5. AWSÊßãÊàê"
    echo "============"
    show_aws_patterns
    read -p "ÊßãÊàê„Éë„Çø„Éº„É≥ÈÅ∏Êäû (1-3): " aws_pattern
    
    read -p "ÊúàÈ°ç„Ç≥„Çπ„Éà‰∏äÈôêÔºàUSDÔºâ: " cost_limit
    read -p "„É™„Éº„Ç∏„Éß„É≥Ôºà‰æãÔºöus-east-1Ôºâ: " region
    read -p "„Éû„É´„ÉÅAZÊßãÊàê„ÅåÂøÖË¶Å„Åß„Åô„ÅãÔºü (y/N): " multi_az
    
    # 6. ÈÅãÁî®Ë¶Å‰ª∂
    echo ""
    echo "üîß 6. ÈÅãÁî®Ë¶Å‰ª∂"
    echo "============="
    show_monitoring_options
    read -p "Áõ£Ë¶ñ„É¨„Éô„É´ÈÅ∏Êäû (1-3): " monitoring_level
    
    read -p "„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÈ†ªÂ∫¶ÔºàÊó•Ôºâ: " backup_frequency
    read -p "„É≠„Ç∞‰øùÊåÅÊúüÈñìÔºàÊó•Ôºâ: " log_retention
    
    # 7. ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂
    echo ""
    echo "üöÄ 7. ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂"
    echo "====================="
    show_cicd_options
    read -p "CI/CDÊà¶Áï•ÈÅ∏Êäû (1-3): " cicd_strategy
    
    read -p "Áí∞Â¢ÉÊï∞Ôºàdev/staging/prodÔºâ: " env_count
    read -p "„Éá„Éó„É≠„Ç§È†ªÂ∫¶ÔºàÈÄ±Ôºâ: " deploy_frequency
    
    # Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅÆÁîüÊàê
    generate_detailed_requirements "$project_name" "$project_desc" "$development_period" "$team_size" "$industry_template" "$target_users" "$main_features" "$success_metrics" "$concurrent_users" "$data_volume" "$slo_choice" "$response_time" "$security_level" "$handle_pii" "$payment_feature" "$aws_pattern" "$cost_limit" "$region" "$multi_az" "$monitoring_level" "$backup_frequency" "$log_retention" "$cicd_strategy" "$env_count" "$deploy_frequency"
    
    # Ê±∫ÂÆöË®òÈå≤„ÅÆÊõ¥Êñ∞
    update_decision_log "„Ç¶„Ç£„Ç∂„Éº„Éâ„É¢„Éº„ÉâÂÆå‰∫Ü" "ÂÖ®Ë¶Å‰ª∂„ÇíÂØæË©±ÂΩ¢Âºè„ÅßÂÆöÁæ©" "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅÆÁîüÊàêÂÆå‰∫Ü"
    
    log_success "„Ç¶„Ç£„Ç∂„Éº„Éâ„É¢„Éº„Éâ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü"
}

# „Åä„Åæ„Åã„Åõ„É¢„Éº„Éâ
auto_mode() {
    local description="$1"
    
    if [ -z "$description" ]; then
        read -p "‰Ωú„Çä„Åü„ÅÑ„Çµ„Éº„Éì„Çπ„ÇíË™¨Êòé„Åó„Å¶„Åè„Å†„Åï„ÅÑ: " description
    fi
    
    log_info "„Åä„Åæ„Åã„Åõ„É¢„Éº„Éâ„ÅßË¶Å‰ª∂„ÇíËá™ÂãïÁîüÊàê„Åó„Åæ„Åô"
    log_info "Ë™¨Êòé: $description"
    
    # Á∞°Âçò„Å™ÂàÜÊûê„Å®„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÅÆË®≠ÂÆö
    analyze_description "$description"
    
    # Ê±∫ÂÆöË®òÈå≤„ÅÆÊõ¥Êñ∞
    update_decision_log "„Åä„Åæ„Åã„Åõ„É¢„Éº„ÉâÂÆå‰∫Ü" "AI„Å´„Çà„ÇãËá™ÂãïË¶Å‰ª∂ÁîüÊàê" "Ê•≠ÁïåÊ®ôÊ∫ñÂÄ§„ÅßÂàùÊúüË®≠ÂÆö"
    
    log_success "„Åä„Åæ„Åã„Åõ„É¢„Éº„Éâ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü"
    log_info "ÁîüÊàê„Åï„Çå„ÅüË¶Å‰ª∂„ÇíÁ¢∫Ë™ç„Åó„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶ --update „ÅßË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
}

# Ë™¨ÊòéÊñá„ÅÆÂàÜÊûê
analyze_description() {
    local description="$1"
    
    # „Ç≠„Éº„ÉØ„Éº„ÉâÂàÜÊûêÔºàÁ∞°ÊòìÁâàÔºâ
    local industry="„Åù„ÅÆ‰ªñ"
    local pattern="2"  # „Éá„Éï„Ç©„É´„Éà„ÅØ„Ç≥„É≥„ÉÜ„ÉäÊßãÊàê
    
    if [[ "$description" =~ (EC|ecommerce|ÈÄöË≤©|„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞) ]]; then
        industry="EC„Çµ„Ç§„Éà"
        pattern="2"
    elif [[ "$description" =~ (SaaS|API|„Çµ„Éº„Éì„Çπ) ]]; then
        industry="SaaS"
        pattern="2"
    elif [[ "$description" =~ („É°„Éá„Ç£„Ç¢|„Éñ„É≠„Ç∞|CMS) ]]; then
        industry="„É°„Éá„Ç£„Ç¢"
        pattern="3"
    elif [[ "$description" =~ (Á§æÂÜÖ|ÁÆ°ÁêÜ|internal) ]]; then
        industry="Á§æÂÜÖ„Ç∑„Çπ„ÉÜ„É†"
        pattern="1"
    fi
    
    log_info "ÂàÜÊûêÁµêÊûú: $industry"
    
    # Ëá™ÂãïÁîüÊàê„Åï„Çå„ÅüË¶Å‰ª∂ÂÆöÁæ©Êõ∏
    cat > "$OUTPUT_DIR/requirements.md" << EOF
# Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏ÔºàËá™ÂãïÁîüÊàêÔºâ

## „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊ¶ÇË¶Å
- **„Çµ„Éº„Éì„ÇπÊ¶ÇË¶Å**: ${description}
- **Êé®ÂÆöÊ•≠Áïå**: ${industry}
- **‰ΩúÊàêÊó•**: $(date -I)
- **ÁîüÊàêÊñπÊ≥ï**: AI„Åä„Åæ„Åã„Åõ„É¢„Éº„Éâ

## „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂ÔºàÊé®ÂÆöÔºâ
- **„Çø„Éº„Ç≤„ÉÉ„Éà„É¶„Éº„Ç∂„Éº**: ‰∏ÄËà¨„É¶„Éº„Ç∂„Éº
- **‰∏ªË¶ÅÊ©üËÉΩ**: Âü∫Êú¨ÁöÑ„Å™CRUDÊìç‰Ωú
- **ÊàêÂäüÊåáÊ®ô**: „É¶„Éº„Ç∂„ÉºÊï∞„ÄÅÂà©Áî®Áéá

## ÊäÄË°ìË¶Å‰ª∂ÔºàÊ•≠ÁïåÊ®ôÊ∫ñÔºâ
- **ÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞**: 1,000‰∫∫ÔºàÂêåÊôÇÊé•Á∂öÔºâ
- **ÊÉ≥ÂÆö„Éá„Éº„ÇøÈáè**: 100GB
- **ÂèØÁî®ÊÄßÁõÆÊ®ô**: 99.9%
- **„É¨„Çπ„Éù„É≥„Çπ„Çø„Ç§„É†**: 2Áßí‰ª•ÂÜÖ

## „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂
- **„Çª„Ç≠„É•„É™„ÉÜ„Ç£„É¨„Éô„É´**: Ê®ôÊ∫ñ
- **ÂÄã‰∫∫ÊÉÖÂ†±**: Ë¶ÅÁ¢∫Ë™ç
- **Ê±∫Ê∏àÊ©üËÉΩ**: Ë¶ÅÁ¢∫Ë™ç

## AWSÊßãÊàêÔºàÊé®Â•®Ôºâ
- **ÊßãÊàê„Éë„Çø„Éº„É≥**: „Éë„Çø„Éº„É≥${pattern}
- **„Ç≥„Çπ„Éà‰∏äÈôê**: 500 USD/Êúà
- **„É™„Éº„Ç∏„Éß„É≥**: us-east-1
- **„Éû„É´„ÉÅAZ**: Êé®Â•®

## ÈÅãÁî®Ë¶Å‰ª∂ÔºàÊ®ôÊ∫ñÔºâ
- **Áõ£Ë¶ñ„É¨„Éô„É´**: Ê®ôÊ∫ñ
- **„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÈ†ªÂ∫¶**: 1Êó•ÊØé
- **„É≠„Ç∞‰øùÊåÅÊúüÈñì**: 30Êó•

## ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂
- **CI/CDÊà¶Áï•**: Ê®ôÊ∫ñÁöÑ„Å™GitHub Actions
- **Áí∞Â¢ÉÊï∞**: 3Áí∞Â¢ÉÔºàdev/staging/prodÔºâ
- **„Éá„Éó„É≠„Ç§È†ªÂ∫¶**: ÈÄ±1Âõû

## ‚ö†Ô∏è Ë¶ÅË™øÊï¥È†ÖÁõÆ
‰ª•‰∏ã„ÅÆÈ†ÖÁõÆ„ÅØË©≥Á¥∞„Å™Ê§úË®é„ÅåÂøÖË¶Å„Åß„ÅôÔºö

### È´òÂÑ™ÂÖàÂ∫¶
- [ ] Ë©≥Á¥∞„Å™„Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÅÆÁ¢∫Ë™ç
- [ ] ÂÆüÈöõ„ÅÆÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞
- [ ] „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂„ÅÆÊòéÁ¢∫Âåñ
- [ ] „Ç≥„Çπ„ÉàË¶Å‰ª∂„ÅÆË¶ãÁõ¥„Åó

### ‰∏≠ÂÑ™ÂÖàÂ∫¶
- [ ] ÊäÄË°ìË¶Å‰ª∂„ÅÆË©≥Á¥∞Âåñ
- [ ] ÈÅãÁî®Ë¶Å‰ª∂„ÅÆË™øÊï¥
- [ ] ÈñãÁô∫‰ΩìÂà∂„ÅÆÁ¢∫Ë™ç

### ‰ΩéÂÑ™ÂÖàÂ∫¶
- [ ] Ë©≥Á¥∞„Å™Ê©üËÉΩË¶Å‰ª∂
- [ ] UI/UXË¶Å‰ª∂
- [ ] „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπË¶Å‰ª∂

## Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó
1. \`--update\` „ÅßË¶Å‰ª∂„ÅÆË©≥Á¥∞Âåñ
2. „Çπ„ÉÜ„Éº„ÇØ„Éõ„É´„ÉÄ„Éº„Å®„ÅÆË¶Å‰ª∂Á¢∫Ë™ç
3. „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ë®≠Ë®à„ÅÆÈñãÂßã

EOF
}

# Ê•≠Áïå„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÅÆË°®Á§∫
show_industry_templates() {
    echo "üìã Ê•≠ÁïåÂà•„ÉÜ„É≥„Éó„É¨„Éº„ÉàÔºö"
    echo "1. EC„Çµ„Ç§„Éà - È´òÂèØÁî®ÊÄß„ÄÅÊ±∫Ê∏à„Ç∑„Çπ„ÉÜ„É†„ÄÅÂú®Â∫´ÁÆ°ÁêÜ"
    echo "2. SaaS - „Éû„É´„ÉÅ„ÉÜ„Éä„É≥„Éà„ÄÅAPI‰∏≠ÂøÉ„ÄÅ„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥"
    echo "3. „É°„Éá„Ç£„Ç¢ - È´ò„Éà„É©„Éï„Ç£„ÉÉ„ÇØ„ÄÅCDN„ÄÅ„Ç≥„É≥„ÉÜ„É≥„ÉÑÈÖç‰ø°"
    echo "4. Á§æÂÜÖ„Ç∑„Çπ„ÉÜ„É† - „Çª„Ç≠„É•„É™„ÉÜ„Ç£ÈáçË¶ñ„ÄÅÂÆâÂÆöÊÄßÂÑ™ÂÖà"
    echo "5. „Çπ„Çø„Éº„Éà„Ç¢„ÉÉ„Éó - ‰Ωé„Ç≥„Çπ„Éà„ÄÅËøÖÈÄü„Éá„Éó„É≠„Ç§„ÄÅMVP"
    echo "6. „Åù„ÅÆ‰ªñ - „Ç´„Çπ„Çø„É†Ë®≠ÂÆö"
}

# SLO„Ç™„Éó„Ç∑„Éß„É≥„ÅÆË°®Á§∫
show_slo_options() {
    echo "üìä ÂèØÁî®ÊÄßÁõÆÊ®ôÔºàSLOÔºâÔºö"
    echo "1. 99.0%  - ÊúàÈñì7.2ÊôÇÈñì„ÉÄ„Ç¶„É≥ÔºàÈñãÁô∫Áí∞Â¢ÉÔºâ"
    echo "2. 99.9%  - ÊúàÈñì43ÂàÜ„ÉÄ„Ç¶„É≥ÔºàÊú¨Áï™Áí∞Â¢É„ÉªÊ®ôÊ∫ñÔºâ"
    echo "3. 99.95% - ÊúàÈñì21ÂàÜ„ÉÄ„Ç¶„É≥ÔºàÈáçË¶Å„Ç∑„Çπ„ÉÜ„É†Ôºâ"
    echo "4. 99.99% - ÊúàÈñì4ÂàÜ„ÉÄ„Ç¶„É≥Ôºà„Éü„ÉÉ„Ç∑„Éß„É≥„ÇØ„É™„ÉÜ„Ç£„Ç´„É´Ôºâ"
}

# „Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç™„Éó„Ç∑„Éß„É≥„ÅÆË°®Á§∫
show_security_options() {
    echo "üîí „Çª„Ç≠„É•„É™„ÉÜ„Ç£„É¨„Éô„É´Ôºö"
    echo "1. Âü∫Êú¨ - Ê®ôÊ∫ñÁöÑ„Å™Ë™çË®º„ÉªË™çÂèØ"
    echo "2. Ê®ôÊ∫ñ - WAF„ÄÅÊöóÂè∑Âåñ„ÄÅÁõ£Êüª„É≠„Ç∞"
    echo "3. È´ò - Â§öË¶ÅÁ¥†Ë™çË®º„ÄÅË©≥Á¥∞„Ç¢„ÇØ„Çª„ÇπÂà∂Âæ°"
    echo "4. ÊúÄÈ´ò - RBAC„ÄÅÊöóÂè∑Âåñ„ÄÅ„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„ÇπÂØæÂøú"
}

# AWSÊßãÊàê„Éë„Çø„Éº„É≥„ÅÆË°®Á§∫
show_aws_patterns() {
    echo "‚òÅÔ∏è AWSÊßãÊàê„Éë„Çø„Éº„É≥Ôºö"
    echo "1. „Ç∑„É≥„Éó„É´ÊßãÊàê - EC2 + RDSÔºà‰Ωé„Ç≥„Çπ„Éà„ÄÅ„Ç∑„É≥„Éó„É´Ôºâ"
    echo "2. „Ç≥„É≥„ÉÜ„ÉäÊßãÊàê - ECS + RDSÔºà„Çπ„Ç±„Éº„É©„Éñ„É´„ÄÅ„É¢„ÉÄ„É≥Ôºâ"
    echo "3. „Çµ„Éº„Éê„Éº„É¨„ÇπÊßãÊàê - Lambda + DynamoDBÔºàÈÅãÁî®„É¨„Çπ„ÄÅÂæìÈáèË™≤ÈáëÔºâ"
}

# Áõ£Ë¶ñ„Ç™„Éó„Ç∑„Éß„É≥„ÅÆË°®Á§∫
show_monitoring_options() {
    echo "üìä Áõ£Ë¶ñ„É¨„Éô„É´Ôºö"
    echo "1. Âü∫Êú¨ - CloudWatchÊ®ôÊ∫ñ„É°„Éà„É™„ÇØ„Çπ"
    echo "2. Ê®ôÊ∫ñ - „Ç´„Çπ„Çø„É†„É°„Éà„É™„ÇØ„Çπ + „Ç¢„É©„Éº„Éà + „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ"
    echo "3. È´òÂ∫¶ - X-Ray + Ë©≥Á¥∞„É≠„Ç∞ + Â§ñÈÉ®Áõ£Ë¶ñ + PagerDuty"
}

# CI/CD„Ç™„Éó„Ç∑„Éß„É≥„ÅÆË°®Á§∫
show_cicd_options() {
    echo "üöÄ CI/CDÊà¶Áï•Ôºö"
    echo "1. „Ç∑„É≥„Éó„É´ - GitHub ActionsÂü∫Êú¨ÊßãÊàê"
    echo "2. Ê®ôÊ∫ñ - GitHub Actions + „ÉÜ„Çπ„Éà + „Éá„Éó„É≠„Ç§Ëá™ÂãïÂåñ"
    echo "3. È´òÂ∫¶ - GitHub Actions + Ë§áÊï∞Áí∞Â¢É + ÊâøË™ç„Éï„É≠„Éº"
}

# Ë©≥Á¥∞Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅÆÁîüÊàê
generate_detailed_requirements() {
    # ÂºïÊï∞„ÅÆÂèó„ÅëÂèñ„ÇäÔºàÈï∑„ÅÑ„ÅÆ„ÅßÁúÅÁï•Ë°®Ë®òÔºâ
    local project_name="$1"
    local project_desc="$2"
    # ... „Åù„ÅÆ‰ªñ„ÅÆÂºïÊï∞
    
    cat > "$OUTPUT_DIR/requirements.md" << EOF
# Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏

## „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊ¶ÇË¶Å
- **„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç**: ${project_name}
- **Ê¶ÇË¶Å**: ${project_desc}
- **‰ΩúÊàêÊó•**: $(date -I)
- **ÊúÄÁµÇÊõ¥Êñ∞**: $(date -I)

## „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂
- **Ê•≠ÁïåÂàÜÈ°û**: ${industry_template}
- **„Çø„Éº„Ç≤„ÉÉ„Éà„É¶„Éº„Ç∂„Éº**: ${target_users}
- **‰∏ªË¶ÅÊ©üËÉΩ**: ${main_features}
- **ÊàêÂäüÊåáÊ®ô**: ${success_metrics}

## ÊäÄË°ìË¶Å‰ª∂
- **ÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞**: ${concurrent_users}‰∫∫ÔºàÂêåÊôÇÊé•Á∂öÔºâ
- **ÊÉ≥ÂÆö„Éá„Éº„ÇøÈáè**: ${data_volume}GB
- **ÂèØÁî®ÊÄßÁõÆÊ®ô**: $(get_slo_value "$slo_choice")
- **„É¨„Çπ„Éù„É≥„Çπ„Çø„Ç§„É†**: ${response_time}Áßí‰ª•ÂÜÖ

## „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂
- **„Çª„Ç≠„É•„É™„ÉÜ„Ç£„É¨„Éô„É´**: „É¨„Éô„É´${security_level}
- **ÂÄã‰∫∫ÊÉÖÂ†±ÂèñÊâ±**: ${handle_pii}
- **Ê±∫Ê∏àÊ©üËÉΩ**: ${payment_feature}

## AWSÊßãÊàê
- **ÊßãÊàê„Éë„Çø„Éº„É≥**: „Éë„Çø„Éº„É≥${aws_pattern}
- **„Ç≥„Çπ„Éà‰∏äÈôê**: ${cost_limit} USD/Êúà
- **„É™„Éº„Ç∏„Éß„É≥**: ${region}
- **„Éû„É´„ÉÅAZ**: ${multi_az}

## ÈÅãÁî®Ë¶Å‰ª∂
- **Áõ£Ë¶ñ„É¨„Éô„É´**: „É¨„Éô„É´${monitoring_level}
- **„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÈ†ªÂ∫¶**: ${backup_frequency}Êó•ÊØé
- **„É≠„Ç∞‰øùÊåÅÊúüÈñì**: ${log_retention}Êó•

## ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂
- **CI/CDÊà¶Áï•**: Êà¶Áï•${cicd_strategy}
- **Áí∞Â¢ÉÊï∞**: ${env_count}Áí∞Â¢É
- **„Éá„Éó„É≠„Ç§È†ªÂ∫¶**: ÈÄ±${deploy_frequency}Âõû

## „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜ
- **ÈñãÁô∫ÊúüÈñì**: ${development_period}ÈÄ±
- **„ÉÅ„Éº„É†„Çµ„Ç§„Ç∫**: ${team_size}‰∫∫

## Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó
1. „Çπ„ÉÜ„Éº„ÇØ„Éõ„É´„ÉÄ„Éº„É¨„Éì„É•„Éº
2. „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ë®≠Ë®à
3. ÊäÄË°ìÈÅ∏ÂÆö
4. ÂÆüË£ÖË®àÁîªÁ≠ñÂÆö

EOF
}

# SLOÂÄ§„ÅÆÂèñÂæó
get_slo_value() {
    case "$1" in
        1) echo "99.0%" ;;
        2) echo "99.9%" ;;
        3) echo "99.95%" ;;
        4) echo "99.99%" ;;
        *) echo "99.9%" ;;
    esac
}

# Ê±∫ÂÆöË®òÈå≤„ÅÆÊõ¥Êñ∞
update_decision_log() {
    local decision="$1"
    local reason="$2"
    local impact="$3"
    
    cat >> "$OUTPUT_DIR/decision_log.md" << EOF

### $(date -I) - ${decision}
- **Ê±∫ÂÆöÂÜÖÂÆπ**: ${decision}
- **ÁêÜÁî±**: ${reason}
- **ÂΩ±Èüø**: ${impact}
- **ÊâøË™çËÄÖ**: Requirements Agent
- **Êõ¥Êñ∞ÊôÇÂàª**: $(date '+%Y-%m-%d %H:%M:%S')

EOF
}

# Ë¶Å‰ª∂„ÅÆÊõ¥Êñ∞
update_requirements() {
    log_info "Ë¶Å‰ª∂„ÅÆÊõ¥Êñ∞„ÇíÈñãÂßã„Åó„Åæ„Åô"
    
    if [ ! -f "$OUTPUT_DIR/requirements.md" ]; then
        log_error "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Åæ„Åö --wizard „Åæ„Åü„ÅØ --auto „ÇíÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
        return 1
    fi
    
    echo "ÁèæÂú®„ÅÆË¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÇíË°®Á§∫„Åó„Åæ„ÅôÔºö"
    echo "================================"
    cat "$OUTPUT_DIR/requirements.md"
    echo "================================"
    
    echo ""
    echo "Êõ¥Êñ∞„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö"
    echo "1. „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂"
    echo "2. ÊäÄË°ìË¶Å‰ª∂"
    echo "3. „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë¶Å‰ª∂"
    echo "4. AWSÊßãÊàê"
    echo "5. ÈÅãÁî®Ë¶Å‰ª∂"
    echo "6. ÈñãÁô∫„Éª„Éá„Éó„É≠„Ç§Ë¶Å‰ª∂"
    echo "7. ÂÖ®‰ΩìÁöÑ„Å™Ë¶ãÁõ¥„Åó"
    
    read -p "ÈÅ∏Êäû (1-7): " update_choice
    
    case "$update_choice" in
        1) update_business_requirements ;;
        2) update_technical_requirements ;;
        3) update_security_requirements ;;
        4) update_aws_requirements ;;
        5) update_operational_requirements ;;
        6) update_development_requirements ;;
        7) wizard_mode ;;
        *) log_error "ÁÑ°Âäπ„Å™ÈÅ∏Êäû„Åß„Åô" ;;
    esac
}

# „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÅÆÊõ¥Êñ∞
update_business_requirements() {
    echo "üìã „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÅÆÊõ¥Êñ∞"
    echo "===================="
    
    read -p "Êñ∞„Åó„ÅÑ„Çø„Éº„Ç≤„ÉÉ„Éà„É¶„Éº„Ç∂„ÉºÔºàÁèæÂú®„ÅÆÂÄ§„ÇíÂ§âÊõ¥„Åô„ÇãÂ†¥ÂêàÔºâ: " new_target_users
    read -p "Êñ∞„Åó„ÅÑ‰∏ªË¶ÅÊ©üËÉΩÔºàÁèæÂú®„ÅÆÂÄ§„ÇíÂ§âÊõ¥„Åô„ÇãÂ†¥ÂêàÔºâ: " new_main_features
    read -p "Êñ∞„Åó„ÅÑÊàêÂäüÊåáÊ®ôÔºàÁèæÂú®„ÅÆÂÄ§„ÇíÂ§âÊõ¥„Åô„ÇãÂ†¥ÂêàÔºâ: " new_success_metrics
    
    # Êõ¥Êñ∞Âá¶ÁêÜÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ sed „ÇÑ awk „Çí‰ΩøÁî®Ôºâ
    log_info "„Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü"
    
    # Ê±∫ÂÆöË®òÈå≤„ÅÆÊõ¥Êñ∞
    update_decision_log "„Éì„Ç∏„Éç„ÇπË¶Å‰ª∂Êõ¥Êñ∞" "„Çπ„ÉÜ„Éº„ÇØ„Éõ„É´„ÉÄ„Éº„Åã„Çâ„ÅÆ„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ" "Ë¶Å‰ª∂„ÅÆÁ≤æÂ∫¶Âêë‰∏ä"
}

# ÊäÄË°ìË¶Å‰ª∂„ÅÆÊõ¥Êñ∞
update_technical_requirements() {
    echo "üîß ÊäÄË°ìË¶Å‰ª∂„ÅÆÊõ¥Êñ∞"
    echo "================"
    
    read -p "Êñ∞„Åó„ÅÑÊÉ≥ÂÆö„É¶„Éº„Ç∂„ÉºÊï∞: " new_concurrent_users
    read -p "Êñ∞„Åó„ÅÑÊÉ≥ÂÆö„Éá„Éº„ÇøÈáèÔºàGBÔºâ: " new_data_volume
    
    show_slo_options
    read -p "Êñ∞„Åó„ÅÑÂèØÁî®ÊÄßÁõÆÊ®ôÈÅ∏Êäû (1-4): " new_slo_choice
    
    read -p "Êñ∞„Åó„ÅÑ„É¨„Çπ„Éù„É≥„Çπ„Çø„Ç§„É†Ë¶Å‰ª∂ÔºàÁßíÔºâ: " new_response_time
    
    # Êõ¥Êñ∞Âá¶ÁêÜ
    log_info "ÊäÄË°ìË¶Å‰ª∂„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü"
    
    # Ê±∫ÂÆöË®òÈå≤„ÅÆÊõ¥Êñ∞
    update_decision_log "ÊäÄË°ìË¶Å‰ª∂Êõ¥Êñ∞" "„Çà„ÇäË©≥Á¥∞„Å™Ë¶Å‰ª∂„ÅåÂà§Êòé" "ÊäÄË°ìÈÅ∏ÂÆö„Å∏„ÅÆÂΩ±Èüø"
}

# Ë¶Å‰ª∂„ÅÆÊ§úË®º
validate_requirements() {
    log_info "Ë¶Å‰ª∂ÂÆöÁæ©„ÅÆÊ§úË®º„ÇíÈñãÂßã„Åó„Åæ„Åô"
    
    if [ ! -f "$OUTPUT_DIR/requirements.md" ]; then
        log_error "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"
        return 1
    fi
    
    local validation_errors=0
    
    echo "üîç Ë¶Å‰ª∂ÂÆöÁæ©Ê§úË®º„É¨„Éù„Éº„Éà"
    echo "======================="
    
    # ÂøÖÈ†àÈ†ÖÁõÆ„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ
    echo ""
    echo "üìã ÂøÖÈ†àÈ†ÖÁõÆ„ÉÅ„Çß„ÉÉ„ÇØ:"
    
    if ! grep -q "„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç" "$OUTPUT_DIR/requirements.md"; then
        echo "‚ùå „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç„ÅåÊú™ÂÆöÁæ©"
        ((validation_errors++))
    else
        echo "‚úÖ „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç"
    fi
    
    if ! grep -q "ÂèØÁî®ÊÄßÁõÆÊ®ô" "$OUTPUT_DIR/requirements.md"; then
        echo "‚ùå ÂèØÁî®ÊÄßÁõÆÊ®ô„ÅåÊú™ÂÆöÁæ©"
        ((validation_errors++))
    else
        echo "‚úÖ ÂèØÁî®ÊÄßÁõÆÊ®ô"
    fi
    
    if ! grep -q "ÊßãÊàê„Éë„Çø„Éº„É≥" "$OUTPUT_DIR/requirements.md"; then
        echo "‚ùå AWSÊßãÊàê„Éë„Çø„Éº„É≥„ÅåÊú™ÂÆöÁæ©"
        ((validation_errors++))
    else
        echo "‚úÖ AWSÊßãÊàê„Éë„Çø„Éº„É≥"
    fi
    
    # Êï¥ÂêàÊÄß„ÉÅ„Çß„ÉÉ„ÇØ
    echo ""
    echo "üîÑ Êï¥ÂêàÊÄß„ÉÅ„Çß„ÉÉ„ÇØ:"
    
    # ÂèØÁî®ÊÄß„Å®„Ç≥„Çπ„Éà„ÅÆÊï¥ÂêàÊÄß
    if grep -q "99.99%" "$OUTPUT_DIR/requirements.md" && grep -q "100 USD" "$OUTPUT_DIR/requirements.md"; then
        echo "‚ö†Ô∏è  99.99%„ÅÆÂèØÁî®ÊÄß„ÅßÊúà100USD„ÅØÂÆüÁèæÂõ∞Èõ£"
        ((validation_errors++))
    fi
    
    # ÁµêÊûú„ÅÆË°®Á§∫
    echo ""
    if [ $validation_errors -eq 0 ]; then
        echo "‚úÖ Ê§úË®ºÂÆå‰∫Ü: „Ç®„É©„Éº„Å™„Åó"
        log_success "Ë¶Å‰ª∂ÂÆöÁæ©„ÅØÊúâÂäπ„Åß„Åô"
    else
        echo "‚ùå Ê§úË®ºÂÆå‰∫Ü: ${validation_errors}ÂÄã„ÅÆ„Ç®„É©„Éº"
        log_error "$validation_errors ÂÄã„ÅÆÂïèÈ°å„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü"
    fi
    
    # ÊîπÂñÑÊèêÊ°à
    echo ""
    echo "üí° ÊîπÂñÑÊèêÊ°à:"
    echo "- Ë¶Å‰ª∂„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç„ÇíÊòéÁ¢∫Âåñ"
    echo "- ÈùûÊ©üËÉΩË¶Å‰ª∂„ÅÆÂÖ∑‰ΩìÂåñ"
    echo "- „É™„Çπ„ÇØ„ÅÆË≠òÂà•„Å®ÂØæÁ≠ñ"
    
    return $validation_errors
}

# Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà
export_requirements() {
    log_info "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Åæ„Åô"
    
    if [ ! -f "$OUTPUT_DIR/requirements.md" ]; then
        log_error "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"
        return 1
    fi
    
    local export_dir="exports"
    mkdir -p "$export_dir"
    
    # Êó•‰ªò‰ªò„Åç„Éï„Ç°„Ç§„É´Âêç
    local timestamp=$(date +%Y%m%d_%H%M%S)
    local export_file="$export_dir/requirements_$timestamp.md"
    
    # „É°„Çø„Éá„Éº„Çø‰ªò„Åç„Åß„Ç®„ÇØ„Çπ„Éù„Éº„Éà
    cat > "$export_file" << EOF
# Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏Ôºà„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÁâàÔºâ

**„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÊó•ÊôÇ**: $(date '+%Y-%m-%d %H:%M:%S')  
**„Ç®„ÇØ„Çπ„Éù„Éº„ÉàËÄÖ**: Requirements Agent  
**„Éê„Éº„Ç∏„Éß„É≥**: ${AGENT_VERSION}  

---

EOF
    
    cat "$OUTPUT_DIR/requirements.md" >> "$export_file"
    
    log_success "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Åæ„Åó„Åü: $export_file"
    
    # Áµ±Ë®àÊÉÖÂ†±„ÅÆÁîüÊàê
    echo ""
    echo "üìä Ë¶Å‰ª∂ÂÆöÁæ©Áµ±Ë®à:"
    echo "- ÊñáÂ≠óÊï∞: $(wc -c < "$OUTPUT_DIR/requirements.md")"
    echo "- Ë°åÊï∞: $(wc -l < "$OUTPUT_DIR/requirements.md")"
    echo "- Ê±∫ÂÆöÊ∏à„ÅøÈ†ÖÁõÆ: $(grep -c "‚úÖ" "$OUTPUT_DIR/requirements.md" 2>/dev/null || echo 0)"
    echo "- Êú™Ê±∫ÂÆöÈ†ÖÁõÆ: $(grep -c "‚ùå" "$OUTPUT_DIR/requirements.md" 2>/dev/null || echo 0)"
}

# ‰ªñ„ÅÆ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å´Ë¶Å‰ª∂ÂÆöÁæ©„ÇíÈÄÅ‰ø°
send_to_agents() {
    if [ ! -f "$OUTPUT_DIR/requirements.md" ]; then
        log_error "Ë¶Å‰ª∂ÂÆöÁæ©Êõ∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"
        return 1
    fi
    
    log_info "Ë¶Å‰ª∂ÂÆöÁæ©„Çí‰ªñ„ÅÆ„Ç®„Éº„Ç∏„Çß„É≥„Éà„Å´ÈÄÅ‰ø°„Åó„Å¶„ÅÑ„Åæ„Åô..."
    
    # Architect Agent„Å´ÈÄÅ‰ø°
    if [ -f "../core/agent-send.sh" ]; then
        ../core/agent-send.sh architect "Ë¶Å‰ª∂ÂÆöÁæ©„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ë®≠Ë®à„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
        log_success "Architect Agent„Å´Ë¶Å‰ª∂ÂÆöÁæ©„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü"
    else
        log_error "agent-send.sh„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"
    fi
}

# „É°„Ç§„É≥Âá¶ÁêÜ
main() {
    echo "üìã $AGENT_NAME v$AGENT_VERSION"
    echo "================================"
    
    # ÂàùÊúüÂåñ
    init_project
    
    # ÂºïÊï∞„ÅÆÂá¶ÁêÜ
    case "$1" in
        --wizard)
            wizard_mode
            ;;
        --auto)
            auto_mode "$2"
            ;;
        --update)
            update_requirements
            ;;
        --validate)
            validate_requirements
            ;;
        --export)
            export_requirements
            ;;
        --send)
            send_to_agents
            ;;
        --help|"")
            show_usage
            ;;
        *)
            log_error "‰∏çÊòé„Å™„Ç™„Éó„Ç∑„Éß„É≥: $1"
            show_usage
            exit 1
            ;;
    esac
}

# ÂÆüË°å
main "$@"